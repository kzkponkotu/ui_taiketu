<!doctype html>
<html class="no-js" lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foundation for Sites</title>
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/app.css">
    <style>
    body {
       background-color: #FFFFFF;
       margin-left: 0px;
       margin-top: 0px;
       margin-right: 0px;
       margin-bottom: 0px;
       overflow-x: hidden;
       overflow-y: hidden;
    }
    canvas {left:0;}
    </style>
    <script src="./js/p5.min.js"></script>
    <script>
        var gakuhu = [];
        var kousi_w,kousi_h;
        var mouseDragged_flag = false;
        var doremi = ['ド','レ','ミ','ファ','ソ','ラ','シ','ド'];

        function setup() {
            var ua = navigator.userAgent;
            if(ua.indexOf('iPhone') > 0 || ua.indexOf('iPod') > 0 || ua.indexOf('Android') > 0 && ua.indexOf('Mobile') > 0){
                //alert("スマホ");
                kousi_w = 4;
                kousi_h = 8;
            }else if(ua.indexOf('iPad') > 0 || ua.indexOf('Android') > 0){
                //alert("タブレット");
                kousi_w = 4;
                kousi_h = 8;
            }else{
                //alert("PC");
                kousi_w = 8;
                kousi_h = 8;
            }

            createCanvas(windowWidth, windowHeight-document.getElementsByClassName("top-bar")[0].clientHeight);
            for(var y=0; y<kousi_h; y++){
                gakuhu[y] = [];                
                for(var x=0; x<kousi_w; x++){
                    gakuhu[y][x] = false;
                }
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight-document.getElementsByClassName("top-bar")[0].clientHeight);
        }

        function draw() {
            stroke(0);
            background(255);

            //横線
            for(var i=0; i<kousi_h; i++){
                line(0,(height/kousi_h)*i,width,(height/kousi_h)*i);
            }
            //縦線
            for(var i=0; i<kousi_w; i++){
                line((width/kousi_w)*i,0,(width/kousi_w)*i,height);
            }

            //赤い四角とドレミファソラシドを書くよ
            for(var y=0; y<kousi_h; y++){
                for(var x=0; x<kousi_w; x++){
                    if(gakuhu[y][x]){
                        fill(255,0,0);
                        noStroke();
                        rect((width/kousi_w)*x+10,(height/kousi_h)*y+10,(width/kousi_w)-20,(height/kousi_h)-20);
                    }
                    fill(0);
                    noStroke();                    
                    if(width < height)textSize(((width/kousi_w)-20)/5);
                    else textSize(((height/kousi_h)-20)/5);
                    text(doremi[y],(width/kousi_w)*x+20,(height/kousi_h)*(y+1)-20);
                }
            }
        }
        
        //譜面入力
        function mouseClicked() {
            if(!mouseDragged_flag){
                for(var y=0; y<kousi_h; y++){
                    for(var x=0; x<kousi_w; x++){
                        if(mouseY >= (height/kousi_h)*y && mouseY <= (height/kousi_h)*(y+1)){
                            if(mouseX >= (width/kousi_w)*x && mouseX <= (width/kousi_w)*(x+1)){
                                if(!gakuhu[y][x])for(var i=0; i<kousi_h; i++)gakuhu[i][x] = false;                            
                                gakuhu[y][x] = !gakuhu[y][x];
                            }
                        }
                    }
                }
            }
            mouseDragged_flag = false;
        }

        function mouseDragged() {
            for(var y=0; y<kousi_h; y++){
                for(var x=0; x<kousi_w; x++){
                    if(mouseY >= (height/kousi_h)*y && mouseY <= (height/kousi_h)*(y+1)){
                        if(mouseX >= (width/kousi_w)*x && mouseX <= (width/kousi_w)*(x+1)){
                            for(var i=0; i<kousi_h; i++)gakuhu[i][x] = false;
                            gakuhu[y][x] = !gakuhu[y][x];
                            mouseDragged_flag = true;
                        }
                    }
                }
            }
        }
    </script>
  </head>
  <body>
    <div class="top-bar">
    <div class="top-bar-left">
        <ul class="dropdown menu" data-dropdown-menu>
        <li class="menu-text">誰でも演奏できる君</li>
        </ul>
    </div>
    <div class="top-bar-right">
        <a href="#" class="button">＜</a>        
        <a href="#" class="button">再生</a>
        <a href="#" class="button">停止</a>
        <a href="#" class="button">ダウンロード</a>
        <a href="#" class="button">共有</a>        
        <a href="#" class="button">＞</a>        
    </div>    
    </div>      
    <script src="js/vendor/jquery.js"></script>
    <script src="js/vendor/what-input.js"></script>
    <script src="js/vendor/foundation.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
